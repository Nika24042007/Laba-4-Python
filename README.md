# Лабороторная работа № 5

## Введение
* **Цель:** Изучить принцип нахождения и исправления ошибок в коде с помощью Debbug
* **Чему я научилась:**
    - Работать с Debbug
    - Искать и исправлять ошибки
    - Определять тип ошибки

## Структура проекта

 <pre>
    .
    ├── lab<# лабораторной работы>             # Кодовая база вашей лабораторной работы
    │   ├── Debbud/                            # Фото ошибок
    │   │   ├── 1.png                          # Первая ошибка
    │   │   ├── 1.1.png                        # Исправленная первая ошибка
    │   │   ├── 2.png                          # Вторая ошибка
    │   │   ├── 2.1.png                        # Исправленная вторая ошибка 
    │   │   ├── 3.png                          # Третья ошибка
    │   │   ├── 3.1.png                        # Исправленная третья ошибка 
    │   │   ├── 4.png                          # Четвертая ошибка
    │   │   ├── 4.1.png                        # Исправленная четвертая ошибка
    │   │   ├── 5.png                          # Пятая ошибка
    │   │   ├── 5.1.png                        # Исправленная пятая ошибка
    │   ├── src/                               # Исходный код
    │   │   ├── Book.py                        # Создание книги
    │   │   ├── BookCollecrion.py              # Создание списка книг
    │   │   ├── BookIndex.py                   # Создание словарей из книг
    │   │   ├── Liblary.py                     # Работа со спискои и словарями
    │   │   ├── Simulation.py                  # Симуляция пользователя
    │   │   ├── constans.py                    # Константы
    │   │   ├── main.py                        # Основная функция
    │   ├── tests/                             # Unit тесты
    │   │   ├── test_book.py                   # Тест создание книги
    │   │   ├── test_bookcollection.py         # Тест создания списка книг
    │   │   ├── test_bookindex.py              # Тест создания словарей
    │   │   ├── test_liblary.py                # Тест работы билиотеке
    │   │   ├── test_simulation.py             # Тест симуляции
    │   ├── uv.lock                            # зависимости вашего проекта
    │   ├── report.pdf                         # Отчет
    │   ├── .gitignore                         # git ignore файл
    │   ├──.pre-commit-config.yaml             # Средства автоматизации проверки кодстайла
    │   ├── README.md                          # Описание вашего проекта, с описанием файлов и с титульником о том,
                                               # что и какая задача
</pre>

## Ошибки
### Ошибка 1 - неправильный парсинг входных данных

    Место: main.py, строка с 30 по 38

    Симптом:
    При попытке в try-except взять элемент по индексу всегда выпадает ошибка, тк из-за неправильного парсинга список пустует

    Как воспроизвести:
    Выюрать самостоятельный ввод команд (2), выбрать команду add, и ввести книгу соответственно требованиям программы

    Отладка:
    Установить breakboint на if (строка 30). 
    В отладчике видно, что значение имеет только title, все остальные перемнный пустуют

    Причина:
    Оставлять пробел после удаления названия из строки. Из-за чего в последующем парсинг нет подходящей под шаблон части строки

    Исправление:
    Замена всех шаблонов на: r'^"(.*?)"\s'

    Проверка:
    Проведение команды add соответствующей ожиданиям

    Доказательства:
    1.png - скриншот с ошибкой 
    1.1.png - без ошибки

### Ошибка 2 - ошибка в границах (слишком ранней опредление индекса рандомон)

    Место: Liblary.py, def change_random()

    Симптом:
    Всегда выпадает ошибка, когда запущена симуляция, список пуст и выбрано действие изменения

    Как воспроизвести:
    Запустить симуляцию, желательно с большим количеством шагов, чтобы точно хоть раз выпало нужное действие

    Отладка:
    Установить breakpoint сразу поcле def change_random(), и дождаться, когда в симуляции выпадет нужное действие

    Причина:
    При нулевой длине списка рандомное значение пытается взяться в промежутке от 0 до -1

    Исправление:
    Перенос определения индекса после else, когда точно становится известно, что список не пуст

    Проверка:
    Запуск симуляции с предыущим сидом, когда была ошибка

    Доказательства:
    2.png - с ошибкой
    2.1.png - без ошибки

### Ошибка 3 - Неверное логическое условие

    Место: Liblary.py, del_random()

    Симптом:
    При выполнение симуляции, если в списке есть только одна книги выводится сообщение, что список пуст, хотя это не так
    
    Как воспроизвести:
    Самостоятельно или дождаться пока симуляция сама добавит в список книги. Когда в списке только она книга проиграть симуляцией уоманду удаления, и тогда выведется сообщение о пустоте списка

    Отладка:
    Установить breakpoint перед if в def del_random(self). При отладке станет видно, что когда лина списка единица, проигрывается вариант для пустого списка

    Причина:
    Использование не верное сранение (l > 1)

    Исправление:
    Замена на: l > 0

    Проверка:
    Запуск симуляции с темже сидом, при котором произошла ошибка

    Доказательства:
    3.png - с ошибкой
    3.1.png - без ошибки

### Ошибка 4 - неверное логическое условие

    Место: Liblary.py, def change()

    Как воспроизвести:
    Запустить программу с ручным вводом и не пустым списком, также не устанавливать не существующего инндекса книги в списке, выбрать change, изменять книгу по названию

    Отладка:
    Установить breakpoint перед всем циклом.
    В отладчике видно, что ни одно из if и elif не подхлдит при "title", поэтому в этом случает программа выводит сообщение об ошибке

    Причина:
    Использование неверного логического выражения в данной ситуации

    Исправление:
    Замена: is на ==

    Проверка:
    Запуск программы по той же сжеме с темеже данными что были при выпадение ошибки

    Доказательства:
    4.png - с ошибкой
    4.1.png - без ошибки

### Ошибка 5 - отсутствие обновления словарей при добавление в список книг

    Место: Liblary.py, BookIndex.py

    Симптом:
    При изменении списка книг не изменяются словари составленный на основе этого списка. Из-за чего при работе со словарями они пустуют, и получаются не верный значениня

    Как воспроизвести:
    Запустить программу добавить книгу, а потом применить функцию, которая основана на работе со словарями

    Отладка:
    Установать breakpoint перед функцией, работующей со словарями или сразу после выполнения изменения списка.
    В отладчике будет видно, что список изменился, а словарь пустует

    Причина:
    Словари создаються на основе не измененого списка, поэтому после изменения списка они тоже не меняются

    Исправления:
    Написание функции обновления словарей и применять ее полсе кадого изменения списка

    Проверка:
    Запуск тойже серии команд, что была запущена при выявлении ошибки

    Доказательства:
    5.png - с ошибкой
    5.1.png - без ошибки




